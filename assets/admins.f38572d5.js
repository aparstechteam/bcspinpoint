import{_ as k}from"./Button.b05c5543.js";import{_ as j}from"./Input.133d6b7b.js";import b from"./Icon.e4f61c34.js";import{_ as I}from"./Modal.83d94015.js";import{r as f,o as m,c as _,b as o,w as v,a as e,f as i,i as g,t as x,d as V,g as S,F as w,h as B,j as F,k as M}from"./entry.b16efdc3.js";import"./selectMenu.0d06ae54.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./nuxt-link.71d579b7.js";import"./index.67edb9e7.js";import"./index.114af144.js";import"./transition.8a58bf52.js";import"./keyboard.d01089c5.js";const R={class:"p-5"},D=e("h1",{class:"text-2xl font-semibold"},"Add Admin",-1),E=e("p",{class:"text-gray-500"},"Add an admin",-1),L={class:"mt-5 flex gap-5"},O={key:0},P={class:"mt-5"},T={class:"text-xl font-semibold"},q={class:"text-gray-500"},G={class:"mt-5"},H={__name:"AddAdmin",emits:["adminadded"],setup(C,{emit:u}){const n=f(!1),{$userStore:c,$axios:l,$toastify:r}=B(),A=u,t=f(null),d=f(""),y=async()=>{try{const{data:a}=await l.get(`/auth/users/search?phone=${d.value}`,{headers:{Authorization:`Bearer ${c.access_token}`}});t.value=a.user}catch(a){r(a.response.data.message)}},$=async()=>{try{await l.post("/auth/assign-role",{user:t.value._id,role:"admin"},{headers:{Authorization:`Bearer ${c.access_token}`}}),r("Admin added successfully"),A("adminadded"),n.value=!1}catch(a){r(a.response.data.message)}};return(a,s)=>{const p=k,U=j,N=b,z=I;return m(),_(w,null,[o(p,{onClick:s[0]||(s[0]=h=>n.value=!0),label:"Add Admin"}),o(z,{modelValue:i(n),"onUpdate:modelValue":s[2]||(s[2]=h=>g(n)?n.value=h:null)},{default:v(()=>[e("div",R,[D,E,e("div",L,[o(U,{placeholder:"Phone Number",modelValue:i(d),"onUpdate:modelValue":s[1]||(s[1]=h=>g(d)?d.value=h:null),class:"flex-1"},null,8,["modelValue"]),o(p,{color:"black",onClick:y},{default:v(()=>[o(N,{name:"lucide:search"})]),_:1})]),i(t)?(m(),_("div",O,[e("div",P,[e("p",T,x(i(t).name),1),e("p",q,x(i(t).phone),1)]),e("div",G,[o(p,{color:"green",onClick:$},{default:v(()=>[V("Add as Admin")]),_:1})])])):S("",!0)])]),_:1},8,["modelValue"])],64)}}},J={class:"flex justify-between items-center"},K=e("h1",{class:"text-2xl font-semibold"},"Admins",-1),Q={class:"my-5 space-y-5"},W={class:"text-lg font-semibold"},ie={__name:"admins",setup(C){const{$axios:u,$userStore:n,$toastify:c}=B(),l=f([]),r=async()=>{try{const{data:t}=await u.get("/auth/admins",{headers:{Authorization:`Bearer ${n.access_token}`}});l.value=t.users}catch(t){c(t.response.data.message)}},A=async t=>{try{await u.delete(`/auth/remove-role/${t}`,{headers:{Authorization:`Bearer ${n.access_token}`}}),c("Admin removed"),r()}catch(d){c(d.response.data.message)}};return F(async()=>{await r()}),(t,d)=>{const y=H,$=b,a=k;return m(),_("div",null,[e("div",J,[K,o(y,{onAdminadded:r})]),e("div",Q,[(m(!0),_(w,null,M(i(l),s=>(m(),_("div",{key:s._id,class:"border p-4 rounded-lg flex justify-between items-center"},[e("div",null,[e("p",W,x(s.user.name),1),e("p",null,x(s.user.phone),1)]),e("div",null,[o(a,{color:"red",onClick:p=>A(s._id)},{default:v(()=>[o($,{name:"lucide:trash"}),V(" Remove Access ")]),_:2},1032,["onClick"])])]))),128))])])}}};export{ie as default};
