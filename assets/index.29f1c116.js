import{i as T,t as O,w as W,a as F,n as x,b as H,c as R}from"./index.67edb9e7.js";import{a6 as B,r as K,Y as P,L as Y,a7 as $}from"./entry.b16efdc3.js";function q(e){var r;const t=O(e);return(r=t==null?void 0:t.$el)!=null?r:t}const N=T?window:void 0;function D(...e){let r,t,o,c;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,c]=e,r=N):[r,t,o,c]=e,!r)return x;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const d=[],S=()=>{d.forEach(s=>s()),d.length=0},l=(s,f,y,p)=>(s.addEventListener(f,y,p),()=>s.removeEventListener(f,y,p)),a=Y(()=>[q(r),O(c)],([s,f])=>{if(S(),!s)return;const y=H(f)?{...f}:f;d.push(...t.flatMap(p=>o.map(v=>l(s,p,v,y))))},{immediate:!0,flush:"post"}),i=()=>{a(),S()};return R(i),i}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E="__vueuse_ssr_handlers__",G=I();function I(){return E in A||(A[E]=A[E]||{}),A[E]}function Q(e,r){return G[e]||r}function U(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const X={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function Z(e,r,t,o={}){var c;const{flush:d="pre",deep:S=!0,listenToStorageChanges:l=!0,writeDefaults:a=!0,mergeDefaults:i=!1,shallow:s,window:f=N,eventFilter:y,onError:p=n=>{console.error(n)},initOnMounted:v}=o,g=(s?B:K)(typeof r=="function"?r():r);if(!t)try{t=Q("getDefaultStorage",()=>{var n;return(n=N)==null?void 0:n.localStorage})()}catch(n){p(n)}if(!t)return g;const w=O(r),z=U(w),h=(c=o.serializer)!=null?c:X[z],{pause:M,resume:C}=W(g,()=>V(g.value),{flush:d,deep:S,eventFilter:y});return f&&l&&F(()=>{D(f,"storage",_),D(f,J,L),v&&_()}),v||_(),g;function V(n){try{if(n==null)t.removeItem(e);else{const u=h.write(n),m=t.getItem(e);m!==u&&(t.setItem(e,u),f&&f.dispatchEvent(new CustomEvent(J,{detail:{key:e,oldValue:m,newValue:u,storageArea:t}})))}}catch(u){p(u)}}function j(n){const u=n?n.newValue:t.getItem(e);if(u==null)return a&&w!=null&&t.setItem(e,h.write(w)),w;if(!n&&i){const m=h.read(u);return typeof i=="function"?i(m,w):z==="object"&&!Array.isArray(m)?{...w,...m}:m}else return typeof u!="string"?u:h.read(u)}function L(n){_(n.detail)}function _(n){if(!(n&&n.storageArea!==t)){if(n&&n.key==null){g.value=w;return}if(!(n&&n.key!==e)){M();try{(n==null?void 0:n.newValue)!==h.write(g.value)&&(g.value=j(n))}catch(u){p(u)}finally{n?P(C):C()}}}}}const b=new Map;function te(e){const r=$();function t(l){var a;const i=b.get(e)||new Set;i.add(l),b.set(e,i);const s=()=>c(l);return(a=r==null?void 0:r.cleanups)==null||a.push(s),s}function o(l){function a(...i){c(a),l(...i)}return t(a)}function c(l){const a=b.get(e);a&&(a.delete(l),a.size||d())}function d(){b.delete(e)}function S(l,a){var i;(i=b.get(e))==null||i.forEach(s=>s(l,a))}return{on:t,once:o,off:c,emit:S,reset:d}}function ne(e,r,t={}){const{window:o=N}=t;return Z(e,r,o==null?void 0:o.localStorage,t)}export{te as a,q as b,ne as u};
